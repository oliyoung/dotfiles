{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://api.otr.com.au/schemas/ErrorResponse.schema.json",
  "title": "Error Response",
  "description": "Standard error response schema for ProfileService API endpoints.",
  "type": "object",
  "properties": {
    "error": {
      "type": "string",
      "description": "Error code identifying the type of error.",
      "example": "CUSTOMER_NOT_FOUND"
    },
    "message": {
      "type": "string",
      "description": "Human-readable error message.",
      "example": "Customer profile does not exist for this VCI"
    },
    "vivaConsumerId": {
      "type": "string",
      "pattern": "^vci_[a-zA-Z0-9]+$",
      "description": "Viva Consumer ID related to the error (if applicable).",
      "example": "vci_xyz789abc"
    },
    "email": {
      "type": "string",
      "format": "email",
      "description": "Email address related to the error (if applicable).",
      "example": "customer@example.com"
    },
    "partnerLinkId": {
      "type": "string",
      "format": "uuid",
      "description": "Partner link ID related to the error (if applicable).",
      "example": "550e8400-e29b-41d4-a716-446655440000"
    },
    "partner": {
      "type": "string",
      "enum": [
        "FLYBUYS",
        "SHELL_CARD",
        "AFL",
        "BUDGET_DIRECT"
      ],
      "description": "Partner identifier related to the error (if applicable).",
      "example": "FLYBUYS"
    },
    "status": {
      "type": "string",
      "enum": [
        "ACTIVE",
        "SUSPENDED",
        "CLOSED",
        "LINKED",
        "UNLINKED",
        "LINKING_IN_PROGRESS",
        "FAILED"
      ],
      "description": "Status related to the error (if applicable).",
      "example": "CLOSED"
    },
    "currentStatus": {
      "type": "string",
      "description": "Current status (for invalid status transition errors).",
      "example": "CLOSED"
    },
    "requestedStatus": {
      "type": "string",
      "description": "Requested status (for invalid status transition errors).",
      "example": "ACTIVE"
    },
    "retryAfter": {
      "type": "integer",
      "description": "Recommended retry delay in seconds (for 503 Service Unavailable errors).",
      "example": 60,
      "minimum": 0
    },
    "details": {
      "type": "object",
      "description": "Additional error details (optional).",
      "additionalProperties": true
    }
  },
  "required": ["error", "message"],
  "additionalProperties": false
}
