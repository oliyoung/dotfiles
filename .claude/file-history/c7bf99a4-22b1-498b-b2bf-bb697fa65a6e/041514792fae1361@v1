{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://api.otr.com.au/schemas/UpdateStatusRequest.schema.json",
  "title": "Update Customer Status Request",
  "description": "Request schema for updating customer profile status (ACTIVE, SUSPENDED, CLOSED). CLOSED status triggers GDPR data retention policy.",
  "type": "object",
  "properties": {
    "status": {
      "type": "string",
      "enum": [
        "ACTIVE",
        "SUSPENDED",
        "CLOSED"
      ],
      "description": "New profile status (ACTIVE: normal operation, SUSPENDED: temporary deactivation, CLOSED: permanent closure).",
      "example": "CLOSED"
    },
    "reason": {
      "type": "string",
      "enum": [
        "CUSTOMER_REQUEST",
        "FRAUD_PREVENTION",
        "GDPR_ERASURE",
        "ADMIN_ACTION"
      ],
      "description": "Reason for status change (required for SUSPENDED and CLOSED transitions).",
      "example": "CUSTOMER_REQUEST"
    }
  },
  "required": ["status"],
  "additionalProperties": false,
  "if": {
    "properties": {
      "status": {
        "enum": ["SUSPENDED", "CLOSED"]
      }
    }
  },
  "then": {
    "required": ["reason"]
  }
}
