# Building Documentation

This repository includes build scripts to generate both PDF documentation and the Antora static site.

## Prerequisites

### For PDF Generation

Install the required Ruby gems:

```bash
gem install asciidoctor-pdf
gem install asciidoctor-diagram
```

### For Site Generation

Install Node.js dependencies:

```bash
npm install
```

## Usage

### Option 1: Using VS Code Tasks (recommended)

Press `Ctrl+Shift+P` (or `Cmd+Shift+P` on macOS), type "Run Task", and select from:

**Build Tasks:**

- `Make: Build Site` (default build task - press `Ctrl+Shift+B`)
- `Make: Build PDF` - Generate PDFs from AsciiDoc files
- `Make: Build All` - Clean, build PDFs, and build site
- `npm: Build Antora` - Build Antora site only
- `npm: Build Antora (Local)` - Build with local fetch

**Development Tasks:**

- `npm: Serve Site` - Serve the built site at http://localhost:8080
- `npm: Dev (Build & Serve)` - Build and serve in one step
- `Workflow: Build & Serve` - Build site then serve

**Maintenance Tasks:**

- `Make: Install Dependencies` - Install Ruby gems
- `Make: Clean PDF` - Remove generated PDFs
- `Make: Help` - Show all Make targets

**Workflow Tasks:**

- `Workflow: Clean, Build PDF & Site` - Complete rebuild

### Option 2: Using Make

```bash
# Install dependencies
make install

# Build PDFs
make pdf

# Build Antora site
make site

# Build everything (clean + PDF + site)
make all

# Clean generated PDFs
make clean

# Show all available commands
make help
```

### Option 3: Using npm scripts

```bash
# Build Antora site
npm run build

# Build with local fetch
npm run build:local

# Serve the site
npm run serve

# Build and serve
npm run dev
```

### Option 4: Using scripts directly

```bash
# Build PDFs
./build-pdf.sh

# Build site
./build-site.sh
```

The script will:

1. Find all `.adoc` files in the repository
2. Convert each file to PDF using `asciidoctor-pdf`
3. Maintain the original folder structure under the `pdf/` directory
4. Apply the custom theme from `asciidoc/theme.yml`
5. Use custom fonts from `asciidoc/fonts/`
6. Enable diagram support via `asciidoctor-diagram`

## Output

PDFs are generated in the `pdf/` directory with the same folder structure as the source files.

Example:
```
initiatives/digital_menu_board.adoc
  → pdf/initiatives/digital_menu_board.pdf

architecture_definitions/digital_menu_board.adoc
  → pdf/architecture_definitions/digital_menu_board.pdf
```

## Build Status

The script provides:

- ✓ Success/failure status for each file
- Summary of total files processed
- List of any failed files

## Notes

- The `pdf/` directory is gitignored and won't be committed to the repository
- If the theme file or fonts directory is missing, the build continues with warnings
- Diagram generation requires Graphviz to be installed on your system
