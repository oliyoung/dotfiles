= OTR Digital Architecture Documentation
:toc: left
:toclevels: 3
:sectanchors:

Welcome to the OTR Digital Architecture documentation. This documentation describes the Domain-Driven Design (DDD) architecture for OTR Group's digital platform.

== Overview

This architecture repository uses https://contextmapper.org/docs/language-reference/[Context Mapper (CML)] files to model bounded contexts (xref:bounded-contexts:loyalty.adoc[Loyalty], xref:bounded-contexts:payment.adoc[Payment], xref:bounded-contexts:engagement.adoc[Engagement], xref:bounded-contexts:delivery.adoc[Delivery], xref:bounded-contexts:location.adoc[Location], xref:bounded-contexts:recommendation.adoc[Recommendation]), domain aggregates, and system integrations following strategic DDD patterns.

NOTE: This architecture represents a *target state vision*. The platform will evolve incrementally from the current AWS-based monolithic API ("OTR App API") to this DDD architecture through phased extraction of bounded contexts.

== Reference

* xref:ubiquitous_language.adoc[Ubiquitous Language] - Glossary of domain terms

== Architecture Components

=== Bounded Contexts

Bounded contexts define the boundaries of different business capabilities within the OTR platform. Each bounded context has its own domain model and is responsible for specific business functions.

* xref:bounded-contexts:engagement.adoc[Engagement Service]
* xref:bounded-contexts:fuel.adoc[Fuel Service]
* xref:bounded-contexts:handover.adoc[Handover Service]
* xref:bounded-contexts:location.adoc[Location Service]
* xref:bounded-contexts:loyalty.adoc[Loyalty Service]
* xref:bounded-contexts:payment.adoc[Payment Service]
* xref:bounded-contexts:profile.adoc[Profile Service]
* xref:bounded-contexts:recommendation.adoc[Recommendation Service]

=== External Integrations

* xref:bounded-contexts:braze.adoc[Braze] - Marketing Automation
* xref:bounded-contexts:eagle_eye.adoc[Eagle Eye] - SaaS Loyalty Engine
* xref:bounded-contexts:flybuys.adoc[Flybuys] - Coalition Loyalty Partner
* xref:bounded-contexts:microsoft_entra_external_id.adoc[Microsoft Entra External ID] - Customer Identity and Access Management
* xref:bounded-contexts:salesforce_crm.adoc[Salesforce CRM] - Customer Profile System

=== Domains

Domain definitions provide the core business concepts and rules that span across bounded contexts.

* xref:domains:engagement.adoc[Engagement Domain]
* xref:domains:location.adoc[Location Domain]
* xref:domains:loyalty.adoc[Loyalty Domain]
* xref:domains:payment.adoc[Payment Domain]
* xref:domains:recommendation.adoc[Recommendation Domain]

=== Initiatives

Current initiatives with both architecture definitions (the "what" and "why") and solution architectures (the "how"):

.Flybuys Integration
* xref:architecture-definitions:flybuys_integration.adoc[Architecture Definition] - Business goals, constraints, and requirements
* xref:solution-architectures:flybuys_integration.adoc[Solution Architecture] - Technical implementation and deployment

.Salesforce Customer Support
* xref:architecture-definitions:salesforce_customer_support.adoc[Architecture Definition] - Business goals, constraints, and requirements
* xref:solution-architectures:salesforce_customer_support.adoc[Solution Architecture] - Technical implementation and deployment

=== Events

* xref:events:event_catalog.adoc[Event Catalog] - Domain events published across the system

== Key Architectural Patterns

=== Integration Patterns

1. **Anti-Corruption Layer (ACL)** - Protects core services from external system changes
2. **Customer-Supplier with Conformist** - External systems we don't control
3. **Open Host Service (OHS) + Published Language (PL)** - Event-driven internal integration
4. **Backend-for-Frontend (BFF)** - Simplified APIs for presentation layers

=== Domain-Driven Design Principles

This architecture follows DDD strategic and tactical patterns:

* **Bounded Contexts** - Clear boundaries between business capabilities
* **Aggregates** - Transactional consistency boundaries
* **Domain Events** - Asynchronous communication between contexts
* **Ubiquitous Language** - Shared vocabulary between business and technical teams
